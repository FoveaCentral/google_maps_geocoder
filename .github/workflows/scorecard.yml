# Download the latest Ruby patch versions, install dependencies, and run tests.
name: test
on:
  push:
    paths-ignore:
      - '**.md'
      - '**.txt'
jobs:
  analysis:
    environment: staging
    runs-on: ubuntu-latest
    permissions:
      security-events: write  # Needed to upload the results to code-scanning dashboard.
      id-token: write         # Needed to publish results and get a badge (see publish_results).
    steps:
    - name: OSSF Scorecard action
      uses: ossf/scorecard-action@v2.4.0
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        publish_results: true
        results_file: results.sarif
        results_format: sarif
    - name: "Upload to code-scanning"
      uses: github/codeql-action/upload-sarif@1b1aada464948af03b950897e5eb522f92603cc2 # v3.24.9
      with:
        sarif_file: results.sarif
